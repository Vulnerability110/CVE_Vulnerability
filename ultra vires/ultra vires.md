##### **越权操作**

| 漏洞描述 | 通过越权身份进行恶意修改操作                       |
| -------- | -------------------------------------------------- |
| 潜在威胁 | 攻击者可以利用越权身份进行修改操作，导致数据不正确 |
| 所在文件 | ChatManageController                               |
| 所在行数 | 495,496                                            |
| 修复建议 | 对登录的用户进行权限判断是否属于该用户的信息       |

```Plaintext
/** * 讨论区管理 * @return */@RequestMapping("chatmanage")
public String chatManage(@RequestParam(value="page",defaultValue="0") int page,      @SessionAttribute("userId") Long userId,Model model,HttpSession session){   
  Page<Discuss> page2=disService.pagingMe(page, null, userId,null,null,null);   
  setPagintMess(model, page2,"/metable","manage","我的管理");   
  model.addAttribute("me", "me");   
  session.removeAttribute("returnUrl");   
  session.setAttribute("returnUrl", "chatmanage");   
  return "chat/chatmanage";
}
```

![img](blob:https://lengjingqicai.feishu.cn/87a77df9-5cd7-43b8-b01a-cbf67c7a40e3)
